<div>
  <mat-card>
    <form [formGroup]="bookForm" class="book-form-flex" novalidate (ngSubmit)="onSubmit()" data-testid="book-form">
      <mat-card-title>{{ 'books.form.title' | translate }}</mat-card-title>
      <mat-card-content>
        <div class="flex-container">
          <mat-form-field appearance="outline" class="flex-item">
            <mat-label>{{ 'books.global.title' | translate }}</mat-label>
            <input matInput formControlName="title" autocomplete="off" data-testid="title-input" />
            @if (title?.touched && title?.invalid) {
              @if (title?.errors?.required) {
                <mat-error>{{ 'books.form.validations.title.required' | translate }}</mat-error>
              } @else if (title?.errors?.pattern) {
                <mat-error>{{ 'books.form.validations.title.pattern' | translate }}</mat-error>
              }
            }
          </mat-form-field>

          <mat-form-field appearance="outline" class="flex-item">
            <mat-label>{{ 'books.global.price' | translate }}</mat-label>
            <input matInput type="number" formControlName="price" data-testid="price-input" />
            @if (price?.touched && price?.invalid) {
              @if (price?.errors?.required) {
                <mat-error>{{ 'books.form.validations.price.required' | translate }}</mat-error>
              } @else if (price?.errors?.min) {
                <mat-error>{{ 'books.form.validations.price.min' | translate: { min: 0.01 } }}</mat-error>
              }
            }
          </mat-form-field>
        </div>

        <div class="flex-container">
          <mat-form-field appearance="outline" class="flex-item">
            <mat-label>{{ 'books.form.validations.pageCount.required' | translate }}</mat-label>
            <input matInput type="number" formControlName="pageCount" data-testid="page-count-input" />
            @if (pageCount?.touched && pageCount?.invalid) {
              @if (pageCount?.errors?.required) {
                <mat-error>{{ 'books.form.validations.pageCount.required' | translate }}</mat-error>
              } @else if (pageCount?.errors?.min) {
                <mat-error>{{ 'books.form.validations.pageCount.min' | translate: { min: 1 } }}</mat-error>
              } @else if (pageCount?.errors?.pattern) {
                <mat-error>{{ 'books.form.validations.pageCount.pattern' | translate }}</mat-error>
              }
            }
          </mat-form-field>

          <mat-checkbox formControlName="onSale" class="flex-item" data-testid="on-sale-checkbox">
            {{ 'books.global.onSale' | translate }}
          </mat-checkbox>
        </div>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button type="button" (click)="onCancel()" data-testid="cancel-button">
          {{ 'books.global.cancel' | translate }}
        </button>
        <button
          mat-flat-button
          type="submit"
          [disabled]="bookForm.invalid || isFormValueUnchanged"
          data-testid="submit-button"
        >
          {{ 'books.form.submit' | translate }}
        </button>
      </mat-card-actions>
    </form>
  </mat-card>
</div>
